import { Button, LineEdit } from "std-widgets.slint";
import { Webview, WebviewLogic } from "webview.slint";

export component WebviewExampleWindow inherits Window {
    in-out property <string> url: "";

    callback navigate_to(string);
    callback navigate_back();
    callback navigate_forward();
    callback reload();

    width: 900px;
    height: 600px;

    HorizontalLayout {
        padding: 8px;
        spacing: 8px;

        VerticalLayout {
            width: 240px;
            spacing: 8px;

            LineEdit {
                placeholder-text: "URL";
                text <=> root.url;
            }

            Button {
                text: "Go";
                clicked => { root.navigate_to(root.url); }
            }

            Button {
                text: "Back";
                clicked => { root.navigate_back(); }
            }

            Button {
                text: "Forward";
                clicked => { root.navigate_forward(); }
            }

            Button {
                text: "Reload";
                clicked => { root.reload(); }
            }

            Rectangle { vertical-stretch: 1; }

            if !WebviewLogic.webview_available && WebviewLogic.error_message != "" : Text {
                text: WebviewLogic.error_message;
                wrap: word-wrap;
            }
        }

        webview_container := Rectangle {
            horizontal-stretch: 1;
            vertical-stretch: 1;

            Webview {
                width: 100%;
                height: 100%;
                external_left_offset: webview_container.x;
                external_top_offset: webview_container.y;
            }
        }
    }
}
